/* Copyright (C) YOOtheme GmbH, YOOtheme Proprietary Use License (http://www.yootheme.com/license) */

jQuery(function($){window.submitbutton=function(action){if(action=="cancel"){window.location="index.php?option=com_widgetkit"}};window.Joomla=window.Joomla||{};window.Joomla.submitbutton=window.submitbutton;$("#tabs").tabs().prev().append('<li class="version">'+$("#tabs").data("wkversion")+"</li>");$("#widgetkit").delegate(".box .deletable","click",function(e){$(this).parent().trigger("delete",[$(this)])});$("input:text").placeholder();if($(".actions .save").css("display","none").length){$("#toolbar tr").prepend('<td id="toolbar-apply"><a href="#"><span class="icon-32-apply"></span>Apply</a></td>');$("#toolbar ul").prepend('<li id="toolbar-apply"><a href="#"><span class="icon-32-apply"></span>Save</a></li>');$("#toolbar.btn-toolbar").prepend('<div id="toolbar-apply" class="btn-group"><button class="btn btn-small btn-success" href="#"><i class="icon-apply icon-white"></i>Save</button></div>');$("#toolbar-apply").bind("click",function(){$("#toolbar").addClass("saving");$(".actions .save").trigger("click")});$(".actions .save").bind("complete",function(){$("#toolbar").removeClass("saving")})}});(function($){var storage={get:function(key){return window["sessionStorage"]?sessionStorage.getItem(key):null},set:function(key,data){if(window["sessionStorage"])sessionStorage.setItem(key,data)}};$.fn["tabs"]=function(){return this.each(function(){var content=$(this).addClass("content").wrap('<div class="tabs-box" />').before('<ul class="nav" />');var navigation=$(this).prev("ul.nav");content.children("li").each(function(){navigation.append("<li><a>"+$(this).hide().attr("data-name")+"</a></li>")});navigation.children("li").bind("click",function(e){e.preventDefault();var index=$("li",navigation).removeClass("active").index($(this).addClass("active").get(0));var tabs=content.children("li").hide();$(tabs[index]).show();storage.set("widgetkit-tab",index)});var current=parseInt(storage.get("widgetkit-tab"));$(!isNaN(current)?navigation.children("li").get(current):navigation.children("li:first")).trigger("click")})}})(jQuery);(function($){var Plugin=function(){};$.extend(Plugin.prototype,{name:"finder",initialize:function(element,options){var $this=this;this.options=$.extend({url:"",path:"",open:"open",loading:"loading"},options);element.data("path",this.options.path).bind("retrieve:finder",retrieve).trigger("retrieve:finder");function retrieve(e){e.preventDefault();var item=$(this).closest("li",element);if(!item.length){item=element}if(item.hasClass($this.options.open)){item.removeClass($this.options.open).children("ul").slideUp()}else{item.addClass($this.options.loading);$.post($this.options.url,{path:item.data("path")},function(data){item.removeClass($this.options.loading).addClass($this.options.open);if(!data.length)return;item.children().remove("ul");item.append("<ul>").children("ul").hide();$.each(data,function(i,val){item.children("ul").append($('<li><a href="#">'+val.name+"</a></li>").addClass(val.type).data("path",val.path))});item.find("ul a").bind("click",retrieve);item.children("ul").slideDown()},"json")}}}});$.fn[Plugin.prototype.name]=function(){var args=arguments;var method=args[0]?args[0]:null;return this.each(function(){var element=$(this);if(Plugin.prototype[method]&&element.data(Plugin.prototype.name)&&method!="initialize"){element.data(Plugin.prototype.name)[method].apply(element.data(Plugin.prototype.name),Array.prototype.slice.call(args,1))}else if(!method||$.isPlainObject(method)){var plugin=new Plugin;if(Plugin.prototype["initialize"]){plugin.initialize.apply(plugin,$.merge([element],args))}element.data(Plugin.prototype.name,plugin)}else{$.error("Method "+method+" does not exist on jQuery."+Plugin.name)}})}})(jQuery);(function($){var isInputSupported="placeholder"in document.createElement("input"),isTextareaSupported="placeholder"in document.createElement("textarea");if(isInputSupported&&isTextareaSupported){$.fn.placeholder=function(){return this}}else{$.fn.placeholder=function(){return this.filter((isInputSupported?"textarea":":input")+"[placeholder]").bind("focus.placeholder",clearPlaceholder).bind("blur.placeholder",setPlaceholder).trigger("blur.placeholder").end()}}function args(elem){var newAttrs={},rinlinejQuery=/^jQuery\d+$/;$.each(elem.attributes,function(i,attr){if(attr.specified&&!rinlinejQuery.test(attr.name)){newAttrs[attr.name]=attr.value}});return newAttrs}function clearPlaceholder(){var $input=$(this);if($input.val()===$input.attr("placeholder")&&$input.hasClass("placeholder")){if($input.data("placeholder-password")){$input.hide().next().show().focus()}else{$input.val("").removeClass("placeholder")}}}function setPlaceholder(elem){var $replacement,$input=$(this);if($input.val()===""||$input.val()===$input.attr("placeholder")){if($input.is(":password")){if(!$input.data("placeholder-textinput")){try{$replacement=$input.clone().attr({type:"text"})}catch(e){$replacement=$("<input>").attr($.extend(args($input[0]),{type:"text"}))}$replacement.removeAttr("name").data("placeholder-password",true).bind("focus.placeholder",clearPlaceholder);$input.data("placeholder-textinput",$replacement).before($replacement)}$input=$input.hide().prev().show()}$input.addClass("placeholder").val($input.attr("placeholder"))}else{$input.removeClass("placeholder")}}$(function(){$("form").bind("submit.placeholder",function(){var $inputs=$(".placeholder",this).each(clearPlaceholder);setTimeout(function(){$inputs.each(setPlaceholder)},10)})});$(window).bind("unload.placeholder",function(){$(".placeholder").val("")})})(jQuery);(function($){var $win=$(window),$doc=$(document),visible=false,persist=false,modal=null,overlay=null;$.modalwin=function(content,settings){var settings=settings||{};if(visible){$.modalwin.close()}if(typeof content==="object"){content=$(content);if(content.parent().length){this.persist=content;this.persist.data("modal-persist-parent",content.parent())}}else if(typeof content==="string"||typeof content==="number"){content=$("<div></div>").html(content)}else{content=$("<div></div>").html("Modalwin Error: Unsupported data type: "+typeof content)}modal=$('<div class="modalwin"><div class="inner"></div><div class="btnclose"></div>');modal.find(".inner:first").append(content);modal.css({position:"fixed","z-index":101}).find(".btnclose").click($.modalwin.close);overlay=$('<div class="modal-overlay"></div>').css({position:"absolute",left:0,top:0,width:$doc.width(),height:$doc.height(),"z-index":100}).bind("click",$.modalwin.close);$("body").append(overlay).append(modal.hide());modal.show().css({left:$win.width()/2-modal.width()/2,top:$win.height()/2-modal.height()/2}).fadeIn();visible=true};$.modalwin.close=function(){if(!visible)return;if(persist){persist.appendTo(this.persist.data("modal-persist-parent"));persist=false}modal.remove();overlay.remove();modal=null;overlay=null;visible=false};$win.bind("resize",function(){if(visible){modal.css({left:$win.width()/2-modal.width()/2,top:$win.height()/2-modal.height()/2});overlay.css({width:$doc.width(),height:$doc.height()})}})})(jQuery);